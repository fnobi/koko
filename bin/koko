#!/usr/bin/env node

var path = require('path'),
    Koko = require(__dirname + '/../');

var argv = require('optimist')
    .boolean('h')
    .alias('o', 'open')
    .alias('p', 'path')
    .alias('h', 'help')
    .alias('u', 'url')
    .describe('o', 'open server\'s url on browser')
    .describe('p', 'document root for server')
    .argv;

if (argv.h) {
    console.log(require('optimist').help());
    process.exit();
}

var dirname = argv.p || '.';
var dirpath = path.resolve(dirname);

var koko = new Koko(dirpath, {
    openPath: argv.o,
    proxyURL: argv.u
});

koko.start();